<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attendance Management System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; padding: 20px; }
    .card { margin-bottom: 20px; }
  </style>
</head>
<body>

  <div class="container">
    <h2 class="text-center mb-4">Attendance Management System</h2>

   <!-- Student List -->
<div class="card">
    <div class="card-header bg-primary text-white">Student List</div>
    <div class="card-body">
      <form action="/mark_attendance" method="POST">
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <th>Roll No</th>
              <th>Name</th>
              <th>Branch</th>
              <th>Present</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>TRIAL</td>
              <td>MECH</td>
              <td><input type="checkbox" name="present_1" /></td>
            </tr>
            <tr>
              <td>2</td>
              <td>TTWO</td>
              <td>AI</td>
              <td><input type="checkbox" name="present_2" /></td>
            </tr>
            <tr>
              <td>2205</td>
              <td>Varun</td>
              <td>ECE</td>
              <td><input type="checkbox" name="present_2205" /></td>
            </tr>
            <tr>
              <td>2301</td>
              <td>Aryann</td>
              <td>CSE</td>
              <td><input type="checkbox" name="present_2301" /></td>
            </tr>
            <tr>
              <td>2302</td>
              <td>Kajal</td>
              <td>AI</td>
              <td><input type="checkbox" name="present_2302" /></td>
            </tr>
            <tr>
              <td>2309</td>
              <td>Samiksha</td>
              <td>CSE</td>
              <td><input type="checkbox" name="present_2309" /></td>
            </tr>
            <tr>
              <td>2311</td>
              <td>Radha</td>
              <td>ECE</td>
              <td><input type="checkbox" name="present_2311" /></td>
            </tr>
            <tr>
              <td>2411</td>
              <td>Radha</td>
              <td>AI</td>
              <td><input type="checkbox" name="present_2411" /></td>
            </tr>
          </tbody>
        </table>
        <button type="submit" class="btn btn-success">Submit Attendance</button>
      </form>
    </div>
  </div>
  

    <!-- View Attendance -->
    <div class="card">
        <div class="card-header bg-secondary text-white">View Attendance</div>
        <div class="card-body">
        <form action="/view_attendance" method="GET">
            <div class="row">
            <div class="col-md-6">
                <label>Student Roll No:</label>
                <input type="text" name="roll_no" class="form-control" placeholder="Enter Roll Number" required>
            </div>
            <div class="col-md-6 mt-4">
                <button type="submit" class="btn btn-info mt-2 w-100">View Full Attendance History</button>
            </div>
            </div>
        </form>
        </div>
    </div>

    <!-- Students Below 80% Attendance -->
    <!-- Students Below 80% Attendance -->
    <div class="card mt-4">
        <div class="card-header bg-warning text-dark">⚠️ Students Below 80% Attendance</div>
        <div class="card-body">
          <table class="table table-bordered table-striped">
            <thead>
              <tr>
                <th>Roll No</th>
                <th>Name</th>
                <th>Branch</th>
                <th>Attendance %</th>
                <th>Send Notification</th>
              </tr>
            </thead>
            <tbody>
              <!-- Sample student rows, dynamically generated by server -->
              <tr>
                <td>2301</td>
                <td>Aryann</td>
                <td>CSE</td>
                <td>78.00%</td>
                <td>
                  <form action="/send_notification" method="POST">
                    <input type="hidden" name="s_id" value="2301" />
                    <input type="hidden" name="message" value="⚠️ Alert: Attendance dropped to 78.00%" />
                    <button type="submit" class="btn btn-danger">Send Notification</button>
                  </form>
                </td>
              </tr>
              <tr>
                <td>2205</td>
                <td>Varun</td>
                <td>ECE</td>
                <td>60.00%</td>
                <td>
                  <form action="/send_notification" method="POST">
                    <input type="hidden" name="s_id" value="2205" />
                    <input type="hidden" name="message" value="⚠️ Alert: Attendance dropped to 60.00%" />
                    <button type="submit" class="btn btn-danger">Send Notification</button>
                  </form>
                </td>
              </tr>
              <!-- Add more student rows as needed, generated dynamically based on attendance -->
            </tbody>
          </table>
    
          <!-- Optionally, you can create a bulk notification button to notify all students below 80% -->
          <!-- This requires handling it server-side in a loop, sending one request for all students below 80% -->
        </div>
    </div>
    
    

  

  
  </div>

</body>
</html>

